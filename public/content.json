{"meta":{"title":"美好的一天","subtitle":null,"description":null,"author":"zhouyb90","url":"http://zhouyanbo.com"},"pages":[{"title":"About","date":"2017-08-04T07:46:42.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"about/index.html","permalink":"http://zhouyanbo.com/about/index.html","excerpt":"","text":""},{"title":"Categories","date":"2017-08-04T07:46:42.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"categories/index.html","permalink":"http://zhouyanbo.com/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2017-08-04T07:46:42.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"tags/index.html","permalink":"http://zhouyanbo.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"处理TIF、EPS图片","slug":"php-handle-tif-image","date":"2017-09-11T08:41:07.000Z","updated":"2017-09-11T09:06:32.000Z","comments":true,"path":"2017/09/11/php-handle-tif-image/","link":"","permalink":"http://zhouyanbo.com/2017/09/11/php-handle-tif-image/","excerpt":"","text":"工作中需要处理图片，格式包括png、jpg、svg、gif、tif、eps，等等。。。 前面几种还知道第一次听说还有tif、eps格式的图片，看来还是见识少啊 在网上找资料发现很少有处理这两种格式的图片的，尤其是eps，最后找到imagemagick，看了介绍之后觉得真是功能强大啊，无所不能 具体安装及使用方法见官网 使用过程中发现用convert命令对tif图片处理时，会在目录下生成不止一个图片 1convert -resize 200 image.tif target_path 查资料发现tif是有图层的，一个tif图片可能会有多个layer，如果只要想生成一个图片的话，修改命令如下 1convert -resize 200 image.tif[0] target_path","categories":[],"tags":[{"name":"image tif eps","slug":"image-tif-eps","permalink":"http://zhouyanbo.com/tags/image-tif-eps/"}],"keywords":[]},{"title":"记录一次找bug经历（一）","slug":"mysql-timestamp-auto-update","date":"2017-09-11T08:07:35.000Z","updated":"2017-09-11T08:37:57.000Z","comments":true,"path":"2017/09/11/mysql-timestamp-auto-update/","link":"","permalink":"http://zhouyanbo.com/2017/09/11/mysql-timestamp-auto-update/","excerpt":"","text":"起因A：发现一个bugB：什么bugA：我们项目中（测试环境）有个接口时间会自动跟着更新时间变动，但是在本地测试是好的B：详细描述下呢A：有个发布动态的功能，其中有发布时、更新时间、新闻时间三个字段，当在后台通过审核后，新闻时间会跟着更新时间一起变B：有没有检查代码有什么不同呢A：检查过了，本地跟线上的代码版本一致B：有没有考虑过哪里出了问题A：看一下线上的数据表吧，感觉数据表有问题B：当时更新数据表是跟本地同步的啊，不能出问题啊，等我有时间看下吧 解决过程由于当时忙，想了下，没想到啥原因，简单看了下代码，确实没问题，暂时放一放了，晚上找到运维看了下线上数据库 1时间字段 timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP what？？？ 不知道怎么这个字段加了在更新的时候修改为当前时间，今后要注意这种小细节，好在这次找bug的时间没有很长 总结当把数据表字段设置成 dafault CURRENT_TIMESTAMP 会在数据插入的时候，自动设置成当前时间 数据表中时间字段更新的方法 在代码中更新字段 设置字段的Extra列on update CURRENT_TIMESTAMP 设置mysql定时任务","categories":[],"tags":[{"name":"mysql auto update timestamp","slug":"mysql-auto-update-timestamp","permalink":"http://zhouyanbo.com/tags/mysql-auto-update-timestamp/"}],"keywords":[]},{"title":"install centos 7 failed","slug":"install-centos-7","date":"2017-08-11T02:49:37.000Z","updated":"2017-08-11T03:15:42.000Z","comments":true,"path":"2017/08/11/install-centos-7/","link":"","permalink":"http://zhouyanbo.com/2017/08/11/install-centos-7/","excerpt":"","text":"起因最近公司新购几台服务器，需要先装好系统再拿到机房，前面两台430服务器安装系统都很顺利，在安装第三台730XD的时候报错failed to start switch root 解决经过检查，是由于找不到U盘加载不到镜像导致这个错误，730服务器上三个USB插孔（前面一个后面两个），不知道前后有什么区别 方案 在启动界面，按e进入编辑模式， 修改启动参数 vmlinuz initrd=initrd.img linux dd quiet 重启会列出所有磁盘，包括U盘盘符，一般U盘会是/dev/sdb，或者/dev/sda，但是我发现这次U盘是/dev/sdc4 接着重启，重新进入编辑模式，修改启动参数 vmlinuz initrd=initrd.img inst.stage2=hd:/dev/sdc4 quiet 根据实际情况修改盘符 ctrl + x 执行就能顺利看到安装界面","categories":[],"tags":[{"name":"centos-7 error install","slug":"centos-7-error-install","permalink":"http://zhouyanbo.com/tags/centos-7-error-install/"}],"keywords":[]},{"title":"Hexo 问题记录","slug":"hexo-issues","date":"2017-08-04T08:18:55.000Z","updated":"2017-08-11T03:15:42.000Z","comments":true,"path":"2017/08/04/hexo-issues/","link":"","permalink":"http://zhouyanbo.com/2017/08/04/hexo-issues/","excerpt":"","text":"Q: hexo deploy会发布整个项目到git master分支A: 删除项目根目录下的 .git 文件夹 Q: 删除.git文件夹后再hexo deploy报错 fatal: Not a git repository (or any of the parent directories): .gitA: 删除项目根目录下的 .deploy 文件夹","categories":[],"tags":[{"name":"hexo issues","slug":"hexo-issues","permalink":"http://zhouyanbo.com/tags/hexo-issues/"}],"keywords":[]},{"title":"CURL File","slug":"curl-file","date":"2017-03-16T02:21:06.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"2017/03/16/curl-file/","link":"","permalink":"http://zhouyanbo.com/2017/03/16/curl-file/","excerpt":"","text":"场景 laravel 框架 上传图片需要通过API接口传到图片服务器上 方案采用curl的方式，在PHP版本大于5.5.0需要用到CURLFile类 12345678910111213141516171819202122function curlPost($url, $postData, $post = 1)&#123; $curl = curl_init(); curl_setopt($curl, CURLOPT_POST, $post); curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); curl_setopt($curl, CURLOPT_HEADER, 0); if ($postData) &#123; curl_setopt($curl, CURLOPT_POSTFIELDS, $postData); &#125; $data = curl_exec($curl); $httpcode = curl_getinfo($curl, CURLINFO_HTTP_CODE); curl_close($curl); if ($httpcode == 200) &#123; return $data; &#125; else &#123; return $httpcode; &#125;&#125; 在调用方法的时候第二个参数是个数组，API接口参数file123array( 'file' =&gt; new \\CURLFile($path)) 若同时上传多个文件，如下1234array( 'file[0]' =&gt; new \\CURLFile($path1), 'file[1]' =&gt; new \\CURLFile($path2)));","categories":[],"tags":[{"name":"curl laravel post","slug":"curl-laravel-post","permalink":"http://zhouyanbo.com/tags/curl-laravel-post/"}],"keywords":[]},{"title":"数据库保存emoji表情","slug":"save-emoji","date":"2017-03-06T03:56:01.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"2017/03/06/save-emoji/","link":"","permalink":"http://zhouyanbo.com/2017/03/06/save-emoji/","excerpt":"","text":"问题mysql保存emoji表情的时候，插入到数据库为问号或者无法插入 原因是由于mysql的utf-8编码最多三个字节，而emoji表情是四个字节，导致插入错误 解决方案修改数据库设置字符集 1ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci; 修改数据表字符集 1ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 修改字段名字符集 1ALTER TABLE table_name CHANGE column_name VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 数据库连接方式参数设置在laravel框架中修改database.php 12'charset' =&gt; 'utf8mb4','collation' =&gt; 'utf8mb4_unicode_ci',","categories":[],"tags":[{"name":"laravel emoji","slug":"laravel-emoji","permalink":"http://zhouyanbo.com/tags/laravel-emoji/"}],"keywords":[]},{"title":"Coding-Specification","slug":"Specification","date":"2017-01-23T01:39:06.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"2017/01/23/Specification/","link":"","permalink":"http://zhouyanbo.com/2017/01/23/Specification/","excerpt":"编写目的 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了更好的提高技术部的工作效率，保证开发的有效性和合理性，并可最大程度的提高程序代码的可读性和可重复利用性，指定此规范。开发团队根据自己的实际情况，可以对本规范进行补充或裁减。本规则会不断的进行适当的改进，以适应最新的开发环境。 程序员可以了解任何代码，弄清程序的状况； 新人可以很快的适应环境； 防止新接触PHP的人出于节省时间的需要，自创一套风格并养成终生的习惯； 防止新接触PHP的人一次次的犯同样的错误； 在一致的环境下，人们可以减少犯错的机会；","text":"编写目的 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了更好的提高技术部的工作效率，保证开发的有效性和合理性，并可最大程度的提高程序代码的可读性和可重复利用性，指定此规范。开发团队根据自己的实际情况，可以对本规范进行补充或裁减。本规则会不断的进行适当的改进，以适应最新的开发环境。 程序员可以了解任何代码，弄清程序的状况； 新人可以很快的适应环境； 防止新接触PHP的人出于节省时间的需要，自创一套风格并养成终生的习惯； 防止新接触PHP的人一次次的犯同样的错误； 在一致的环境下，人们可以减少犯错的机会； 整体要求 技术部php开发规范将参照PEAR的规范，基本采用PEAR指定的规范，在其基础上增加、修改或删除部分适合具体开发环境的规范 本规范包含了PHP开发时程序编码中命名规范、代码缩进规则、控制结构、函数调用、函数定义、注释等方面的规则。 编码规范一、命名规范 1、普通变量命名遵循以下规则 所有字母都使用小写 对于一个变量使用多个单词的，使用驼峰结构命名，即以小写字母开头，从第二个单词开始，每个单词的第一个字母大写 2、PHP中类命名遵循以下规则 以大写字母开头 多个单词组成的变量名，单词之间不用间隔，各个单词首字母大写 例子：class MyClass 或 class DbOracle等 3、方法或函数命名遵循以下规则 首字母小写 多个单词间不使用间隔，除第一个单词外，其他单词首字母大写 function myFunction() 或 function myDbOracle()等 4、数据库字段命名遵循以下规范： 全部使用小写； 多个单词间使用_间隔。 二、书写规范 1、在书写代码的时候，必须注意代码的缩进规则，我们规定代码缩进规则如下： 使用4个空格作为缩进，而不使用tab缩进（对于ultraedit，可以进行预先设置） 2、大括号{}书写规则 在程序中进行结构控制代码编写，如if、for、while、switch等结构，大括号传统的有两种书写习惯，分别如下： { 直接跟在控制语句之后，不换行，如： 123for($i = 0; $i &lt; $count; $i++) &#123; echo 'test';&#125; { 在控制语句下一行，如： 1234for($i = 0; $i &lt; $count; $i++) &#123;&#123; echo 'test';&#125; 其中，第一种是PEAR建议的方式，但是从实际书写中来讲，这并不影响程序的规范和影响用phpdoc实现文档，所以可以根据个人习惯来采用上面的两种方式，但是要求在同一个程序中，只使用其中一种，以免造成阅读的不方便。 3、小括号、关键词和函数遵循以下规则： 小括号和函数名间没有空格；如$test = date(“ymdhis”)； 除非必要，不要在Return返回语句中使用小括号。 如Return $a； 4、在程序中=符号的书写遵循以下规则： 在=符号的两侧，均需留出一个空格；如 $a = $b 、$a = ‘test’等； 在=符号与!、=、&lt;、&gt;等符号相邻时，不需留一个空格；如 if ( $a == $b ) 、if ( $a != $b ) 等； 5、对于控制结构的书写遵循以下规则： switch结构中必须要有default块； 在 for 和 wiile 的循环使用中，要警惕 continue 、 break 的使用，避免产生类似 goto 的问题； 6、如果要在类里面编写构造函数，必须遵循以下规则： 不能在构造函数中有太多实际操作，顶多用来初始化一些值和变量； 不能在构造函数中因为使用操作而返回false或者错误，因为在声明和实例化一个对象的时候，是不能返回错误的； 7、IF语句遵循以下规则： 不能使用 1/0 代替 true/false，在 PHP 中，这是不相等的； 不要使用非零的表达式、变量或者方法直接进行 true/false 判断，而必须使用严格的完整 true/false 判断； 如：不使用 if ( $a ) 或者 if ( checka() ) 而使用 if ( FALSE != $a ) 或者 if ( FALSE != check() ) 8、引号 PHP中单引号和双引号具有不同的含义，最大的几项区别如下： 单引号中，任何变量($var)、特殊转义字符(如“\\t \\r \\n”等)不会被解析，因此PHP的解析速度更快，转义字符仅仅支持“\\’”和“\\\\”这样对单引号和反斜杠本身的转义； 双引号中，变量(\\$var)值会代入字符串中，特殊转义字符也会被解析成特定的单个字符，还有一些专门针对上述两项特性的特殊功能性转义，例如“\\\\$”和“{$array[‘key’]}。这样虽然程序编写更加方便，但同时PHP的解析也很慢； 数组中，如果下标不是整型，而是字符串类型，请务必用单引号将下标括起，正确的写法为\\$array[‘key’]，而不是$array[key]，因为不正确的写法会使PHP解析器认为key是一个常量，进而先判断常量是否存在，不存在时才以“key”作为下标带入表达式中，同时出发错误事件，产生一条Notice级错误。因此，在绝大多数可以使用单引号的场合，禁止使用双引号。依据上述分析，可以或必须使用单引号的情况包括但不限于下述：1.字符串为固定值，不包含“\\t”等特殊转义字符；2.数组的固定下标，例如\\$array[‘key’]表达式中不需要带入变量，例如\\$string = ‘test’;，而非\\$string = “test$var”； 三、注释 程序中变量或者语句的注释遵循以下原则： 写在变量或者语句的前面一行，而不写在同行或者后面； 注释采用/ /的方式； 每个函数前面要包含一个注释块。内容包括函数功能简述，输入/输出参数，预期的返回值，出错代码定义； 注释完整规范； 把已经注释掉的代码删除，或者注明这些已经注释掉的代码仍然保留在源码中的特殊原因。","categories":[],"tags":[{"name":"specification","slug":"specification","permalink":"http://zhouyanbo.com/tags/specification/"}],"keywords":[]},{"title":"数学分析一","slug":"Math-Part1","date":"2017-01-18T08:01:31.000Z","updated":"2017-08-04T07:46:42.000Z","comments":true,"path":"2017/01/18/Math-Part1/","link":"","permalink":"http://zhouyanbo.com/2017/01/18/Math-Part1/","excerpt":"概述本次分享为一些基础知识，介绍一些数学中广泛采用的术语与符号，以及几个基本的概念，为今后的学习做铺垫。 概念 集合 由确定的一些对象汇集的总体 子集 组成集合的这些对象称为集合的元素 x是集合E的元素记作:x∈Ex \\in Ex∈E(读作: x属于E) y不是集合E的元素记作:y∉Ey \\notin Ey∉E(读作: y不属于E)","text":"概述本次分享为一些基础知识，介绍一些数学中广泛采用的术语与符号，以及几个基本的概念，为今后的学习做铺垫。 概念 集合 由确定的一些对象汇集的总体 子集 组成集合的这些对象称为集合的元素 x是集合E的元素记作:x∈Ex \\in Ex∈E(读作: x属于E) y不是集合E的元素记作:y∉Ey \\notin Ey∉E(读作: y不属于E) 集合的关系 E的任何元素都是集合F的元素，E是F的子集，记作E⊂FE \\subset FE⊂F(读作: E包含于F) 两个集合相等记作 E = F 一个特殊的集合，空集：不包含任何元素的集合ϕ\\phiϕ 集合的运算 E⋃FE \\bigcup FE⋃F 由E的所有元素与F的所有元素合在一起组成的集合（并集） E⋂FE \\bigcap FE⋂F 由E和F共同的元素组成的集合 （交集） E∖FE \\setminus FE∖F 由属于E但不属于F的元素组成的集合 （差集） 区间 开区间(a,b) 表示 a &lt; x &lt; b 左开右闭区间(a,b] 表示 a &lt; x ≤ b 左闭右开区间[a,b) 表示 a ≤ x &lt; b 闭区间[a,b] 表示 a ≤ x ≤ b 逻辑符号 α 和 β是两个判断，当α成立的时候，β也成立，我们说α 能推导出 β，记作α⇒β\\alpha \\Rightarrow \\betaα⇒β 如果 α⇒β,\\alpha \\Rightarrow \\beta ,α⇒β, 并且 β⇒α\\beta \\Rightarrow \\alphaβ⇒α 那 α\\alphaα 与 β\\betaβ 等价, 记作α⇔β\\alpha \\Leftrightarrow \\betaα⇔β 函数 变量y随着变量x的变化而变化 映射 对变量x的任何一个值，有变量y的唯一确定的值与之对应 如果D中的任何一个元素，有集合E中的唯一一个元素与之对应，那么f就是从D到E的一个映射，记为 f:D→E\\begin{aligned} f : D \\rightarrow E \\end{aligned}​f:D→E​​ 元素之间的对应关系如下表示 f : x ↦ x2{x}^{2}x​2​​假设 f:D→Ef : D \\rightarrow Ef:D→E 是一个映射，g:G→Hg : G \\rightarrow Hg:G→H也是一个映射，如果f(D)⊂G,f(D)\\subset G,f(D)⊂G,那么从ξ∈D\\xi \\in Dξ∈D开始，相继经过f和g的作用，得到g(f(ξ))g(f(\\xi))g(f(ξ))这样的关系ξ↦g(f(ξ))\\xi \\mapsto g(f(\\xi))ξ↦g(f(ξ)) 对于映射 f⋅gf\\cdot gf⋅g 和 g⋅fg\\cdot fg⋅f 不一定都有意义，有意义也不一定相同比如 f(x)=x2,g(x)=sinxf(x)={x}^{2},g(x)=sinxf(x)=x​2​​,g(x)=sinx g⋅f(x)=sinx2,f⋅g(x)=(sinx)2\\begin{aligned} g\\cdot f(x) = sin{x}^{2}, f\\cdot g(x) = {(sinx)}^{2} \\end{aligned}​g⋅f(x)=sinx​2​​,f⋅g(x)=(sinx)​2​​​​ 计算 计算下面的式子∑k=1n(kp−(k−1)p)\\sum_{k=1}^{n}({k}^{p}-{(k-1)^{p}})∑​k=1​n​​(k​p​​−(k−1)​p​​) =(1p−0p)+(2p−1p)+⋅⋅⋅+(np−(n−1)p)∑k=1n(kp−(k−1)p)=np\\begin{aligned} =({1}^{p} - {0}^{p})+({2}^{p}-{1}^{p})+ \\cdot \\cdot \\cdot + ({n}^{p}-{(n-1)}^{p}) \\\\ \\sum_{k=1}^{n}({k}^{p}-{(k-1)^{p}}) = {n}^{p} \\end{aligned}​=(1​p​​−0​p​​)+(2​p​​−1​p​​)+⋅⋅⋅+(n​p​​−(n−1)​p​​)​​k=1​∑​n​​(k​p​​−(k−1)​p​​)=n​p​​​​ 计算1+2+3…+n由恒等式k2−(k−1)2=2k−1{k}^{2}-{(k-1)}^{2} = 2k-1k​2​​−(k−1)​2​​=2k−1取k=1,2,3,4…n,相加得到 ∑k=1n(k2−(k−1)2)=2∑k=1nk−∑k=1n1n2=2∑k=1nk−n,∑k=1nk=12n2+12n=n(n+1)2\\begin{aligned} \\sum_{k=1}^{n}({k}^{2}-{(k-1)}^{2}) &amp;=2\\sum_{k=1}^{n}k-\\sum_{k=1}^n1 \\\\ {n}^{2} &amp;= 2\\sum_{k=1}^{n}k-n,\\\\ \\sum_{k=1}^{n}k &amp;= \\frac{1}{2}{n}^{2}+\\frac{1}{2}n \\\\ &amp; = \\frac{n(n+1)}{2} \\end{aligned}​​k=1​∑​n​​(k​2​​−(k−1)​2​​)​n​2​​​​k=1​∑​n​​k​​​​=2​k=1​∑​n​​k−​k=1​∑​n​​1​=2​k=1​∑​n​​k−n,​=​2​​1​​n​2​​+​2​​1​​n​=​2​​n(n+1)​​​​ 计算不规则图形的面积假设坐标轴上有一条曲线，计算这条曲线与x轴y轴组成得面积，假设这个图形由y=xp{x}^{p}x​p​​, OX轴和直线x=b围城，求这个图形得面积我们把[0,b]分成n等份，那第k个等分时 [k−1nb,kn]k−1nb≤x≤knb,0≤y≤xp,k=1,2,3...,n\\begin{aligned} [\\frac{k-1}{n}b, \\frac{k}{n}] \\frac{k-1}{n}b\\leq x \\leq \\frac{k}{n}b, 0\\leq y \\leq {x}^{p}, k=1,2,3...,n \\end{aligned}​[​n​​k−1​​b,​n​​k​​]​n​​k−1​​b≤x≤​n​​k​​b,0≤y≤x​p​​,k=1,2,3...,n​​ 那每一个条形得面积Sk{S}_{k}S​k​​满足 (k−1nb)p⋅bn≤Sk≤(knb)p⋅bn{(\\frac{k-1}{n}b)}^{p}\\cdot \\frac{b}{n}\\leq{S}_{k}\\leq{(\\frac{k}{n}b)}^{p}\\cdot\\frac{b}{n}(​n​​k−1​​b)​p​​⋅​n​​b​​≤S​k​​≤(​n​​k​​b)​p​​⋅​n​​b​​ 那么曲线的面积S满足 ∑k=1n(k−1nb)p⋅bn≤Sk≤∑k=1n(knb)p⋅bn\\sum_{k=1}^{n}{(\\frac{k-1}{n}b)}^{p}\\cdot \\frac{b}{n}\\leq{S}_{k}\\leq\\sum_{k=1}^{n}{(\\frac{k}{n}b)}^{p}\\cdot\\frac{b}{n}∑​k=1​n​​(​n​​k−1​​b)​p​​⋅​n​​b​​≤S​k​​≤∑​k=1​n​​(​n​​k​​b)​p​​⋅​n​​b​​ 当n无限大时，近似值的精确度就越高，那么两个数的极限可以看作面积S求的它们共同的极限为 bp+1p+1\\frac{b^{p+1}}{p+1}​p+1​​b​p+1​​​​得到 S=bp+1p+1S=\\frac{b^{p+1}}{p+1}S=​p+1​​b​p+1​​​​","categories":[],"tags":[],"keywords":[]}]}